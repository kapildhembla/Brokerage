<!DOCTYPE html>
<html lang=”en”>
<head>
 <meta charset=”UTF-8">
 <meta name=”viewport” content=”width=device-width, initial-scale=1.0">
 <meta http-equiv=”X-UA-Compatible” content=”ie=edge”>
 <title>Document</title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.base.css">
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.theme.css">

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script src="node_modules/dist/web3.min.js"></script>
<script>
 $(document).ready(function() {
         $('.datepicker').datepicker({
    		format: 'mm/dd/yyyy',
    		startDate: '-3d'
		});
        });


var web3 = new Web3(new Web3.providers.HttpProvider("http://127.0.0.1:8545"));
if (typeof web3 !== 'undefined') {
  web3 = new Web3(web3.currentProvider);
} else {
  alert("No web3");
}

const abi=[
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "string",
				"name": "_brokerCode",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_brokerName",
				"type": "string"
			}
		],
		"name": "registerBroker",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "string",
				"name": "_clientCode",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_clientName",
				"type": "string"
			}
		],
		"name": "registerClient",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "isBroker",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "isCustomer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "string",
				"name": "_tradeId",
				"type": "string"
			},
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			},
			{
				"internalType": "string",
				"name": "_comments",
				"type": "string"
			}
		],
		"name": "disputeBrokerage",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "string",
				"name": "_tradeId",
				"type": "string"
			}
		],
		"name": "confirmBrokerageAmount",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getBrokerTrades",
		"outputs": [
			{
				"components": [
					{
						"components": [
							{
								"internalType": "string",
								"name": "markitWireId",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "tradeDate",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "currency",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "settlementDate",
								"type": "string"
							},
							{
								"internalType": "bool",
								"name": "clearingEligible",
								"type": "bool"
							},
							{
								"internalType": "string",
								"name": "clientCode",
								"type": "string"
							},
							{
								"internalType": "string",
								"name": "brokerCode",
								"type": "string"
							},
							{
								"internalType": "uint256",
								"name": "brokerageAmount",
								"type": "uint256"
							}
						],
						"internalType": "struct Brokerage.Trade",
						"name": "trade",
						"type": "tuple"
					},
					{
						"internalType": "bool",
						"name": "hasBrokeragePaid",
						"type": "bool"
					},
					{
						"internalType": "string",
						"name": "paymentReference",
						"type": "string"
					},
					{
						"internalType": "address",
						"name": "brokerId",
						"type": "address"
					},
					{
						"internalType": "address",
						"name": "senderId",
						"type": "address"
					},
					{
						"internalType": "enum Brokerage.SettlementStatus",
						"name": "status",
						"type": "uint8"
					}
				],
				"internalType": "struct Brokerage.BrokerageTrade[]",
				"name": "_brokerageTrades",
				"type": "tuple[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "string",
				"name": "_markitWireId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_tradeDate",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_currency",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_settlementDate",
				"type": "string"
			},
			{
				"internalType": "bool",
				"name": "_isClearingEligible",
				"type": "bool"
			},
			{
				"internalType": "string",
				"name": "_clientCode",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_brokerCode",
				"type": "string"
			},
			{
				"internalType": "uint256",
				"name": "_brokerage",
				"type": "uint256"
			}
		],
		"name": "submitTrade",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	}
];


var byteCode='0x608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550612821806100606000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b06e155a1161005b578063b06e155a14610101578063c15303901461011d578063d9c8349114610139578063ed543c8e1461015757610088565b80632300d12e1461008d5780634364d973146100a957806359cc1d32146100c557806371c3418e146100e3575b600080fd5b6100a760048036036100a29190810190611e00565b610173565b005b6100c360048036036100be9190810190611e00565b6103c6565b005b6100cd61052e565b6040516100da9190612513565b60405180910390f35b6100eb610771565b6040516100f89190612513565b60405180910390f35b61011b60048036036101169190810190611fae565b6109b4565b005b61013760048036036101329190810190611dbf565b610b8d565b005b610141610cc7565b60405161014e91906124f1565b60405180910390f35b610171600480360361016c9190810190611e6c565b61145a565b005b61017b611b26565b6040518060a001604052803373ffffffffffffffffffffffffffffffffffffffff1681526020016001808111156101ae57fe5b8152602001838152602001848152602001600115158152509050806001846040516101d991906124da565b908152602001604051809103902060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548160ff0219169083600181111561025257fe5b02179055506040820151816001019080519060200190610273929190611b78565b506060820151816002019080519060200190610290929190611b78565b5060808201518160030160006101000a81548160ff02191690831515021790555090505080600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548160ff0219169083600181111561035f57fe5b02179055506040820151816001019080519060200190610380929190611b78565b50606082015181600201908051906020019061039d929190611b78565b5060808201518160030160006101000a81548160ff021916908315150217905550905050505050565b6103ce611b26565b6040518060a001604052803373ffffffffffffffffffffffffffffffffffffffff1681526020016000600181111561040257fe5b815260200183815260200184815260200160011515815250905080600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548160ff021916908360018111156104c757fe5b021790555060408201518160010190805190602001906104e8929190611b78565b506060820151816002019080519060200190610505929190611b78565b5060808201518160030160006101000a81548160ff021916908315150217905550905050505050565b6000610538611b26565b600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060a00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900460ff1660018111156105f657fe5b600181111561060157fe5b8152602001600182018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561069e5780601f106106735761010080835404028352916020019161069e565b820191906000526020600020905b81548152906001019060200180831161068157829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107405780601f1061071557610100808354040283529160200191610740565b820191906000526020600020905b81548152906001019060200180831161072357829003601f168201915b505050505081526020016003820160009054906101000a900460ff1615151515815250509050806080015191505090565b600061077b611b26565b600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060a00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900460ff16600181111561083957fe5b600181111561084457fe5b8152602001600182018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156108e15780601f106108b6576101008083540402835291602001916108e1565b820191906000526020600020905b8154815290600101906020018083116108c457829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156109835780601f1061095857610100808354040283529160200191610983565b820191906000526020600020905b81548152906001019060200180831161096657829003601f168201915b505050505081526020016003820160009054906101000a900460ff1615151515815250509050806080015191505090565b600060028111156109c157fe5b6004846040516109d191906124da565b9081526020016040518091039020600b0160149054906101000a900460ff1660028111156109fb57fe5b14610a3b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a32906125ae565b60405180910390fd5b610a43611bf8565b6040518060600160405280858152602001848152602001838152509050600784604051610a7091906124da565b908152602001604051809103902081908060018154018082558091505090600182039060005260206000209060030201600090919290919091506000820151816000019080519060200190610ac6929190611b78565b50602082015181600101556040820151816002019080519060200190610aed929190611b78565b5050505060016002811115610afe57fe5b600485604051610b0e91906124da565b9081526020016040518091039020600b0160149054906101000a900460ff166002811115610b3857fe5b14610b87576000600485604051610b4f91906124da565b90815260200160405180910390209050600181600b0160146101000a81548160ff02191690836002811115610b8057fe5b0217905550505b50505050565b610b9561052e565b610bd4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bcb906125ee565b60405180910390fd5b6000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002082604051610c2391906124da565b9081526020016040518091039020905060006002811115610c4057fe5b81600b0160149054906101000a900460ff166002811115610c5d57fe5b14610c9d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c949061254e565b60405180910390fd5b600281600b0160146101000a81548160ff02191690836002811115610cbe57fe5b02179055505050565b6060610cd161052e565b610d10576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d07906125ee565b60405180910390fd5b600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030160009054906101000a900460ff16610d9f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d969061256e565b60405180910390fd5b6000600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208054905011610e24576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e1b906125ce565b60405180910390fd5b600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561145157838290600052602060002090600c02016040518060c00160405290816000820160405180610100016040529081600082018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610f505780601f10610f2557610100808354040283529160200191610f50565b820191906000526020600020905b815481529060010190602001808311610f3357829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ff25780601f10610fc757610100808354040283529160200191610ff2565b820191906000526020600020905b815481529060010190602001808311610fd557829003601f168201915b50505050508152602001600282018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156110945780601f1061106957610100808354040283529160200191611094565b820191906000526020600020905b81548152906001019060200180831161107757829003601f168201915b50505050508152602001600382018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156111365780601f1061110b57610100808354040283529160200191611136565b820191906000526020600020905b81548152906001019060200180831161111957829003601f168201915b505050505081526020016004820160009054906101000a900460ff16151515158152602001600582018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156111f35780601f106111c8576101008083540402835291602001916111f3565b820191906000526020600020905b8154815290600101906020018083116111d657829003601f168201915b50505050508152602001600682018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156112955780601f1061126a57610100808354040283529160200191611295565b820191906000526020600020905b81548152906001019060200180831161127857829003601f168201915b5050505050815260200160078201548152505081526020016008820160009054906101000a900460ff16151515158152602001600982018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156113605780601f1061133557610100808354040283529160200191611360565b820191906000526020600020905b81548152906001019060200180831161134357829003601f168201915b50505050508152602001600a820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600b820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600b820160149054906101000a900460ff16600281111561143357fe5b600281111561143e57fe5b8152505081526020019060010190610e83565b50505050905090565b611462610771565b6114a1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114989061252e565b60405180910390fd5b6001826040516114b191906124da565b908152602001604051809103902060030160009054906101000a900460ff1661150f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115069061258e565b60405180910390fd5b611517611c19565b6040518061010001604052808a8152602001898152602001888152602001878152602001861515815260200185815260200184815260200183815250905061155d611c60565b6040518060c001604052808381526020016000151581526020016040518060200160405280600081525081526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001866040516115b891906124da565b908152602001604051809103902060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000600281111561161257fe5b81525090506006600060018660405161162b91906124da565b908152602001604051809103902060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819080600181540180825580915050906001820390600052602060002090600c02016000909192909190915060008201518160000160008201518160000190805190602001906116e8929190611b78565b506020820151816001019080519060200190611705929190611b78565b506040820151816002019080519060200190611722929190611b78565b50606082015181600301908051906020019061173f929190611b78565b5060808201518160040160006101000a81548160ff02191690831515021790555060a082015181600501908051906020019061177c929190611b78565b5060c0820151816006019080519060200190611799929190611b78565b5060e08201518160070155505060208201518160080160006101000a81548160ff02191690831515021790555060408201518160090190805190602001906117e2929190611b78565b50606082015181600a0160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550608082015181600b0160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060a082015181600b0160146101000a81548160ff0219169083600281111561189557fe5b02179055505050506000600560006001876040516118b391906124da565b908152602001604051809103902060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905081818c60405161193191906124da565b90815260200160405180910390206000820151816000016000820151816000019080519060200190611964929190611b78565b506020820151816001019080519060200190611981929190611b78565b50604082015181600201908051906020019061199e929190611b78565b5060608201518160030190805190602001906119bb929190611b78565b5060808201518160040160006101000a81548160ff02191690831515021790555060a08201518160050190805190602001906119f8929190611b78565b5060c0820151816006019080519060200190611a15929190611b78565b5060e08201518160070155505060208201518160080160006101000a81548160ff0219169083151502179055506040820151816009019080519060200190611a5e929190611b78565b50606082015181600a0160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550608082015181600b0160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060a082015181600b0160146101000a81548160ff02191690836002811115611b1157fe5b02179055509050505050505050505050505050565b6040518060a00160405280600073ffffffffffffffffffffffffffffffffffffffff16815260200160006001811115611b5b57fe5b815260200160608152602001606081526020016000151581525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10611bb957805160ff1916838001178555611be7565b82800160010185558215611be7579182015b82811115611be6578251825591602001919060010190611bcb565b5b509050611bf49190611cd5565b5090565b60405180606001604052806060815260200160008152602001606081525090565b604051806101000160405280606081526020016060815260200160608152602001606081526020016000151581526020016060815260200160608152602001600081525090565b6040518060c00160405280611c73611cfa565b815260200160001515815260200160608152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160006002811115611ccf57fe5b81525090565b611cf791905b80821115611cf3576000816000905550600101611cdb565b5090565b90565b604051806101000160405280606081526020016060815260200160608152602001606081526020016000151581526020016060815260200160608152602001600081525090565b600081359050611d50816127b0565b92915050565b600082601f830112611d6757600080fd5b8135611d7a611d758261263b565b61260e565b91508082526020830160208301858383011115611d9657600080fd5b611da1838284612750565b50505092915050565b600081359050611db9816127c7565b92915050565b600060208284031215611dd157600080fd5b600082013567ffffffffffffffff811115611deb57600080fd5b611df784828501611d56565b91505092915050565b60008060408385031215611e1357600080fd5b600083013567ffffffffffffffff811115611e2d57600080fd5b611e3985828601611d56565b925050602083013567ffffffffffffffff811115611e5657600080fd5b611e6285828601611d56565b9150509250929050565b600080600080600080600080610100898b031215611e8957600080fd5b600089013567ffffffffffffffff811115611ea357600080fd5b611eaf8b828c01611d56565b985050602089013567ffffffffffffffff811115611ecc57600080fd5b611ed88b828c01611d56565b975050604089013567ffffffffffffffff811115611ef557600080fd5b611f018b828c01611d56565b965050606089013567ffffffffffffffff811115611f1e57600080fd5b611f2a8b828c01611d56565b9550506080611f3b8b828c01611d41565b94505060a089013567ffffffffffffffff811115611f5857600080fd5b611f648b828c01611d56565b93505060c089013567ffffffffffffffff811115611f8157600080fd5b611f8d8b828c01611d56565b92505060e0611f9e8b828c01611daa565b9150509295985092959890939650565b600080600060608486031215611fc357600080fd5b600084013567ffffffffffffffff811115611fdd57600080fd5b611fe986828701611d56565b9350506020611ffa86828701611daa565b925050604084013567ffffffffffffffff81111561201757600080fd5b61202386828701611d56565b9150509250925092565b60006120398383612368565b905092915050565b61204a816126e3565b82525050565b600061205b82612677565b61206581856126a5565b93508360208202850161207785612667565b8060005b858110156120b35784840389528151612094858261202d565b945061209f83612698565b925060208a0199505060018101905061207b565b50829750879550505050505092915050565b6120ce816126f5565b82525050565b6120dd816126f5565b82525050565b6120ec8161273e565b82525050565b60006120fd8261268d565b61210781856126d8565b935061211781856020860161275f565b80840191505092915050565b600061212e82612682565b61213881856126b6565b935061214881856020860161275f565b61215181612792565b840191505092915050565b6000612169602c836126c7565b91507f4f6e6c7920636c69656e7420697320616c6c6f77656420746f20706572666f7260008301527f6d206f7065726174696f6e2e00000000000000000000000000000000000000006020830152604082019050919050565b60006121cf6016836126c7565b91507f547261646520616c726561647920736574746c65642e000000000000000000006000830152602082019050919050565b600061220f6012836126c7565b91507f4e6f7420612076616c69642062726f6b657200000000000000000000000000006000830152602082019050919050565b600061224f600e836126c7565b91507f556e6b6e6f776e2062726f6b65720000000000000000000000000000000000006000830152602082019050919050565b600061228f6018836126c7565b91507f547261646520697320616c726561647920736574746c656400000000000000006000830152602082019050919050565b60006122cf6013836126c7565b91507f4e6f2074726164657320617661696c61626c65000000000000000000000000006000830152602082019050919050565b600061230f602c836126c7565b91507f4f6e6c792062726f6b657220697320616c6c6f77656420746f20706572666f7260008301527f6d206f7065726174696f6e2e00000000000000000000000000000000000000006020830152604082019050919050565b600060c083016000830151848203600086015261238582826123f8565b915050602083015161239a60208601826120c5565b50604083015184820360408601526123b28282612123565b91505060608301516123c76060860182612041565b5060808301516123da6080860182612041565b5060a08301516123ed60a08601826120e3565b508091505092915050565b60006101008301600083015184820360008601526124168282612123565b915050602083015184820360208601526124308282612123565b9150506040830151848203604086015261244a8282612123565b915050606083015184820360608601526124648282612123565b915050608083015161247960808601826120c5565b5060a083015184820360a08601526124918282612123565b91505060c083015184820360c08601526124ab8282612123565b91505060e08301516124c060e08601826124cb565b508091505092915050565b6124d481612734565b82525050565b60006124e682846120f2565b915081905092915050565b6000602082019050818103600083015261250b8184612050565b905092915050565b600060208201905061252860008301846120d4565b92915050565b600060208201905081810360008301526125478161215c565b9050919050565b60006020820190508181036000830152612567816121c2565b9050919050565b6000602082019050818103600083015261258781612202565b9050919050565b600060208201905081810360008301526125a781612242565b9050919050565b600060208201905081810360008301526125c781612282565b9050919050565b600060208201905081810360008301526125e7816122c2565b9050919050565b6000602082019050818103600083015261260781612302565b9050919050565b6000604051905081810181811067ffffffffffffffff8211171561263157600080fd5b8060405250919050565b600067ffffffffffffffff82111561265257600080fd5b601f19601f8301169050602081019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b60006126ee82612714565b9050919050565b60008115159050919050565b600081905061270f826127a3565b919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600061274982612701565b9050919050565b82818337600083830152505050565b60005b8381101561277d578082015181840152602081019050612762565b8381111561278c576000848401525b50505050565b6000601f19601f8301169050919050565b600381106127ad57fe5b50565b6127b9816126f5565b81146127c457600080fd5b50565b6127d081612734565b81146127db57600080fd5b5056fea365627a7a723158209cd5670bf635b9a3fb423e3da33a8a0c77347e5e469af62d836f4726822fd2696c6578706572696d656e74616cf564736f6c634300050b0040'; 

var contractAddress;
var deployedContract;
var allAccounts;
var contract;

web3.eth.getAccounts(function (error, accounts) {
  if (error) return console.error(error);
   web3.eth.defaultAccount = accounts[0];
allAccounts=accounts;
console.log("First Account",accounts[0])
contract=new web3.eth.Contract(abi);
contract.deploy({
      data: byteCode     
    })
    .send({
      from: allAccounts[0],
      gas:3000000
         

    }).then(function(newContractInstance){
	contractAddress=newContractInstance.options.address;
	deployedContract= new web3.eth.Contract(abi,contractAddress);
	
});
});



function RegisterBroker()
{
var brokerCode= $("#txtBrokerCode").val();
var brokerName= $("#txtBrokerName").val();
 deployedContract.methods.registerBroker(brokerCode,brokerName).send({from: allAccounts[0], gas:3000000}).then((f) => {
 alert("Broker has been Registered");
 });

}

function RegisterClient()
{
var clientCode= $("#txtClientCode").val();
var clientName= $("#txtClientName").val();
 deployedContract.methods.registerClient(clientCode,clientName).send({from: allAccounts[0], gas:3000000}).then((f) => {
 alert("Client has been Registered");
 });

}
function SubmitTrade()
{
var clientCode= $("#txtClientCode2").val();
var brokerCode= $("#txtBrokerCode2").val();
var unit= $("#txtUnit").val();
//var isClearingEligble= $("#txtIsClearingEligble").val();
var isClearingEligble=($('#txtIsClearingEligble').prop('checked'));

var settlementDate=$("#txtSettlementDate").val();
var tradeDate=$("#txtTradeDate").val();
var currency=$("#txtCurrency").val();
var markitWireId=$("#txtMarkitWireId").val();

deployedContract.methods.submitTrade(markitWireId,tradeDate,currency,settlementDate,isClearingEligble,clientCode,brokerCode,unit).send({from: 	allAccounts[0], gas:3000000}).then((f) => {
 alert("Trade Submitted");
$("#txtClientCode2").val('');
$("#txtBrokerCode2").val('');
($('#txtIsClearingEligble').prop('checked',false));

$("#txtUnit").val('');
$("#txtSettlementDate").val('');
$("#txtTradeDate").val('');
$("#txtCurrency").val('');
$("#txtMarkitWireId").val('');

 });

}

function GetBrokerTrades()
{
deployedContract.methods.getBrokerTrades().call().then((res) => {
$("#txtClientCode2").val(res[0].trade.clientCode);
$("#txtBrokerCode2").val(res[0].trade.brokerCode);
($('#txtIsClearingEligble').prop('checked',res[0].trade.settlementDate)) 
$("#txtTradeDate").val(res[0].trade.tradeDate);
$("#txtSettlementDate").val(res[0].trade.settlementDate);
$("#txtCurrency").val(res[0].trade.currency);
$("#txtMarkitWireId").val(res[0].trade.markitWireId);
 });

}

</script>

</head>
<body>


<div class="container">
<section class="jumbotron text-center">
<h1 class="jumbotron-heading">BROKERAGE</h1>
</section>
<br/>
<div class="accordion" id="accordionExample">
  <div class="card">
    <div class="card-header" id="headingOne">
      <h2 class="mb-0">
        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Register Broker
        </button>
      </h2>
    </div>

    <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
      <div class="card-body">
     <div class="form-group">
    	<label for="txtBrokerCode">Broker Code</label>
    	<input class="form-control" id="txtBrokerCode" placeholder="Broker Code">
      	</div>
  	<div class="form-group">
    	<label for="txtBrokerName">Broker Name</label>
    	<input class="form-control" id="txtBrokerName" placeholder="Broker Name">
 	</div>
	<button onClick="RegisterBroker()" class="btn btn-primary">Register Broker</button>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingTwo">
      <h2 class="mb-0">
        <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-	controls="collapseTwo">
          Register Client
        </button>
      </h2>
    </div>
    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
      <div class="card-body">
       <div class="form-group">
    <label for="txtClientCode">Client Code</label>
    <input class="form-control" id="txtClientCode" placeholder="Client Code">
 </div>
  <div class="form-group">
    <label for="txtClientName">Client Name</label>
    <input class="form-control" id="txtClientName" placeholder="Client Name">
 </div>
 <button onClick="RegisterClient()" class="btn btn-primary">Register Client</button>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingThree">
      <h2 class="mb-0">
        <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-	controls="collapseThree">
          Trade
        </button>
      </h2>
    </div>
    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
      <div class="card-body">
       <div class="form-group">
    <label for="txtMarkitWireId">Markit Wire Id</label>
    <input class="form-control" id="txtMarkitWireId" placeholder="Markit Wire Id">
 </div>
  <div class="form-group">
    <label for="txtTradeDate">Trade Date</label>
    <input class="datepicker form-control"  data-date-format="mm/dd/yyyy"  id="txtTradeDate" placeholder="Trade Date">
 </div>
 <div class="form-group">
    <label for="txtCurrency">Currency</label>
    <input class="form-control" id="txtCurrency" placeholder="Currency">
 </div>
 <div class="form-group">
    <label for="txtSettlementDate">Settlement Date</label>
    <input class="form-control datepicker" data-date-format="mm/dd/yyyy" id="txtSettlementDate" placeholder="Settlement Date">
 </div>


 <div class="form-group form-check">
    <input type="checkbox" class="form-check-input" id="txtIsClearingEligble">
    <label class="form-check-label" for="txtIsClearingEligble">Is Clearing Eligble</label>
  </div>
<div class="form-group">
    <label for="txtClientCode2">Client Code</label>
    <input class="form-control" id="txtClientCode2" placeholder="Client Code">
 </div>
<div class="form-group">
    <label for="txtBrokerCode2">Broker Code</label>
    <input class="form-control" id="txtBrokerCode2" placeholder="Broker Code">
 </div>
<div class="form-group">
    <label for="txtUnit">Broker Unit</label>
    <input class="form-control" id="txtUnit" placeholder="Brokerage Unit">
 </div>
 <button onClick="SubmitTrade()" class="btn btn-primary">Submit Trade</button>
 <button onClick="GetBrokerTrades()" class="btn btn-primary">Get Broker Trades</button>

      </div>
    </div>
  </div>
</div>
</div>

</body>
</html>